
// mission section hexagon grid
$('.svg-embed').html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10470.155 -9740 447.31 387.4"><defs><style>.a{fill:#E9F8FE;}.triangle{fill:#2970ff;}.c{fill:none;stroke:#2970ff;stroke-miterlimit:10;stroke-width:1px;stroke-opacity:0.3;}</style></defs><g transform="translate(-10470.2 -9740)"><path class="a" d="M418.4,241.9h0l27.8,48.2h0l-27.8,48.2H362.8L335,386.4H279.3l-27.8-48.1H195.9l-27.8,48.1H112.4L84.6,338.3H29L1.2,290.1,29,241.9,1.2,193.7,29,145.5,1.2,97.4,29,49.2H84.6L112.4,1h55.7l27.8,48.2h55.6L279.3,1H335l27.8,48.2h55.6l27.8,48.2h0l-27.8,48.1h0l27.8,48.2h0Z"/><g transform="translate(-35.2 140)"><path class="triangle" d="M92-42.6h0L64.2,5.5h55.6Z"/><path class="triangle" d="M36.4-42.6,64.2,5.5,92-42.6Z"/><path class="triangle" d="M119.8-90.8H64.2L92-42.6Z"/><path class="triangle" d="M92-42.6h55.6L119.8-90.8Z"/><path class="triangle" d="M92-42.6,64.2-90.8,36.4-42.6Z"/><path class="triangle" d="M92-42.6,119.8,5.5l27.8-48.1Z"/><path class="triangle" d="M92-42.6"/><path class="triangle" d="M175.4-90.8,147.6-42.6h55.7Z"/><path class="triangle" d="M203.3-139H147.6l27.8,48.2Z"/><path class="triangle" d="M147.6-139,119.8-90.8h55.6Z"/><path class="triangle" d="M231.1-90.8,203.3-139,175.4-90.8Z"/><path class="triangle" d="M203.3-42.6l27.8-48.2H175.4Z"/><path class="triangle" d="M175.4-90.8H119.8l27.8,48.2Z"/><path class="triangle" d="M286.7-90.8H231.1l27.8,48.2Z"/><path class="triangle" d="M286.7,5.5,258.9-42.6h0L231.1,5.5Z"/><path class="triangle" d="M258.9-42.6h0L231.1-90.8,203.3-42.6h55.6Z"/><path class="triangle" d="M258.9-42.6H203.3L231.1,5.5Z"/><path class="triangle" d="M314.5-42.6H258.9L286.7,5.5Z"/><path class="triangle" d="M258.9-42.6"/><path class="triangle" d="M258.9-42.6h55.6L286.7-90.8Z"/><path class="triangle" d="M425.8-42.6h55.6L453.6-90.8Z"/><path class="triangle" d="M425.8-42.6H370.2L398,5.5Z"/><path class="triangle" d="M425.8-42.6"/><path class="triangle" d="M453.6,5.5l27.8-48.1H425.8Z"/><path class="triangle" d="M425.8-42.6h0L398-90.8,370.2-42.6h55.6Z"/><path class="triangle" d="M453.6-90.8H398l27.8,48.2Z"/><path class="triangle" d="M425.8-42.6,398,5.5h55.6Z"/><path class="triangle" d="M370.2-42.6,398-90.8H342.3Z"/><path class="triangle" d="M398-90.8,370.2-139,342.3-90.8Z"/><path class="triangle" d="M342.3-90.8,314.5-42.6h55.7Z"/><path class="triangle" d="M370.2-139H314.5l27.8,48.2Z"/><path class="triangle" d="M342.3-90.8H286.7l27.8,48.2Z"/><path class="triangle" d="M314.5-139,286.7-90.8h55.6Z"/><path class="triangle" d="M175.4,5.5l27.9-48.1H147.6Z"/><path class="triangle" d="M147.6-42.6,119.8,5.5h55.6Z"/><path class="triangle" d="M231.1,5.5,203.3-42.6,175.4,5.5Z"/><path class="triangle" d="M175.4,5.5H119.8l27.8,48.2Z"/><path class="triangle" d="M175.4,5.5"/><path class="triangle" d="M231.1,5.5H175.4l27.9,48.2Z"/><path class="triangle" d="M175.4,5.5,147.6,53.7h55.7Z"/><path class="triangle" d="M342.3,5.5H286.7l27.8,48.2Z"/><path class="triangle" d="M314.5,53.7h55.7L342.3,5.5Z"/><path class="triangle" d="M342.3,5.5"/><path class="triangle" d="M342.3,5.5l27.9-48.1H314.5Z"/><path class="triangle" d="M342.3,5.5l27.9,48.2L398,5.5Z"/><path class="triangle" d="M342.3,5.5,314.5-42.6,286.7,5.5Z"/><path class="triangle" d="M398,5.5,370.2-42.6,342.3,5.5Z"/><path class="triangle" d="M92,53.7l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M119.8,5.5,92,53.7h55.6Z"/><path class="triangle" d="M92,53.7"/><path class="triangle" d="M92,53.7,64.2,5.5,36.4,53.7Z"/><path class="triangle" d="M119.8,5.5H64.2L92,53.7Z"/><path class="triangle" d="M36.4,53.7l27.8,48.2L92,53.7Z"/><path class="triangle" d="M92,53.7h0L64.2,101.9h55.6Z"/><path class="triangle" d="M203.3,53.7l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M258.9,53.7l-27.8,48.2h55.6Z"/><path class="triangle" d="M258.9,53.7"/><path class="triangle" d="M258.9,53.7h0L231.1,5.5,203.3,53.7Z"/><path class="triangle" d="M258.9,53.7h55.6L286.7,5.5Z"/><path class="triangle" d="M286.7,5.5H231.1l27.8,48.2Z"/><path class="triangle" d="M258.9,53.7l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M425.8,53.7,453.6,5.5H398Z"/><path class="triangle" d="M425.8,53.7h55.6L453.6,5.5Z"/><path class="triangle" d="M425.8,53.7"/><path class="triangle" d="M398,5.5,370.2,53.7h55.6Z"/><path class="triangle" d="M425.8,53.7,398,101.9h55.6Z"/><path class="triangle" d="M398,101.9l27.8-48.2H370.2Z"/><path class="triangle" d="M425.8,53.7l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M36.4,150.1l27.8,48.2L92,150.1Z"/><path class="triangle" d="M64.2,198.3h55.6L92,150.1Z"/><path class="triangle" d="M64.2,101.9,36.4,150.1H92Z"/><path class="triangle" d="M92,150.1l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M119.8,101.9H64.2L92,150.1Z"/><path class="triangle" d="M92,150.1h55.6l-27.8-48.2Z"/><path class="triangle" d="M175.4,101.9h55.7L203.3,53.7Z"/><path class="triangle" d="M175.4,101.9"/><path class="triangle" d="M147.6,53.7l27.8,48.2h0l27.9-48.2Z"/><path class="triangle" d="M147.6,150.1h55.7l-27.9-48.2Z"/><path class="triangle" d="M175.4,101.9h0l27.9,48.2,27.8-48.2Z"/><path class="triangle" d="M147.6,53.7l-27.8,48.2h55.6Z"/><path class="triangle" d="M175.4,101.9H119.8l27.8,48.2Z"/><path class="triangle" d="M258.9,150.1h55.6l-27.8-48.2Z"/><path class="triangle" d="M258.9,150.1l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M231.1,101.9l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M231.1,198.3h55.6l-27.8-48.2Z"/><path class="triangle" d="M203.3,150.1h55.6l-27.8-48.2Z"/><path class="triangle" d="M203.3,150.1l27.8,48.2,27.8-48.2Z"/><path class="triangle" d="M370.2,150.1,398,198.3l27.8-48.2Z"/><path class="triangle" d="M398,198.3h55.6l-27.8-48.2Z"/><path class="triangle" d="M425.8,150.1l27.8-48.2H398Z"/><path class="triangle" d="M481.4,150.1l-27.8-48.2-27.8,48.2Z"/><path class="triangle" d="M453.6,198.3l27.8-48.2H425.8Z"/><path class="triangle" d="M425.8,150.1,398,101.9l-27.8,48.2Z"/><path class="triangle" d="M342.3,101.9"/><path class="triangle" d="M342.3,101.9H286.7l27.8,48.2Z"/><path class="triangle" d="M342.3,101.9l27.9,48.2L398,101.9Z"/><path class="triangle" d="M342.3,101.9h0l27.9-48.2H314.5Z"/><path class="triangle" d="M286.7,101.9h55.6L314.5,53.7Z"/><path class="triangle" d="M342.3,101.9H398L370.2,53.7Z"/><path class="triangle" d="M314.5,150.1h55.7l-27.9-48.2Z"/><path class="triangle" d="M175.4,198.3h55.7l-27.8-48.2Z"/><path class="triangle" d="M175.4,198.3l27.9-48.2H147.6Z"/><path class="triangle" d="M175.4,198.3"/><path class="triangle" d="M203.3,246.4l27.8-48.1H175.4Z"/><path class="triangle" d="M175.4,198.3l-27.8,48.1h55.7Z"/><path class="triangle" d="M175.4,198.3l-27.8-48.2-27.8,48.2Z"/><path class="triangle" d="M119.8,198.3l27.8,48.1,27.8-48.1H119.8Z"/><path class="triangle" d="M342.3,198.3l27.9-48.2H314.5Z"/><path class="triangle" d="M342.3,198.3"/><path class="triangle" d="M370.2,246.4,398,198.3H342.3Z"/><path class="triangle" d="M342.3,198.3H398l-27.8-48.2Z"/><path class="triangle" d="M342.3,198.3l-27.8-48.2-27.8,48.2Z"/><path class="triangle" d="M342.3,198.3l-27.8,48.1h55.7Z"/><path class="triangle" d="M286.7,198.3l27.8,48.1,27.8-48.1H286.7Z"/><path class="c" d="M119.8-90.8H64.2L36.4-42.6,64.2,5.5h55.6l27.8-48.1Z"/><line class="c" x2="55.6" y2="96.3" transform="translate(64.2 -90.8)"/><line class="c" x1="55.6" y2="96.3" transform="translate(64.2 -90.8)"/><line class="c" x2="111.2" transform="translate(36.4 -42.6)"/><path class="c" d="M203.3-139H147.6L119.8-90.8l27.8,48.2h55.7l27.8-48.2Z"/><line class="c" x2="55.7" y2="96.4" transform="translate(147.6 -139)"/><line class="c" x1="55.7" y2="96.4" transform="translate(147.6 -139)"/><line class="c" x2="111.3" transform="translate(119.8 -90.8)"/><path class="c" d="M286.7-90.8H231.1L203.3-42.6,231.1,5.5h55.6l27.8-48.1Z"/><line class="c" x2="55.6" y2="96.3" transform="translate(231.1 -90.8)"/><line class="c" x1="55.6" y2="96.3" transform="translate(231.1 -90.8)"/><line class="c" x2="111.2" transform="translate(203.3 -42.6)"/><path class="c" d="M453.6-90.8H398L370.2-42.6,398,5.5h55.6l27.8-48.1Z"/><line class="c" x2="55.6" y2="96.3" transform="translate(398 -90.8)"/><line class="c" x1="55.6" y2="96.3" transform="translate(398 -90.8)"/><line class="c" x2="111.2" transform="translate(370.2 -42.6)"/><path class="c" d="M370.2-139H314.5L286.7-90.8l27.8,48.2h55.7L398-90.8Z"/><line class="c" x2="55.7" y2="96.4" transform="translate(314.5 -139)"/><line class="c" x1="55.7" y2="96.4" transform="translate(314.5 -139)"/><line class="c" x2="111.3" transform="translate(286.7 -90.8)"/><path class="c" d="M203.3-42.6H147.6L119.8,5.5l27.8,48.2h55.7L231.1,5.5Z"/><line class="c" x2="55.7" y2="96.3" transform="translate(147.6 -42.6)"/><line class="c" x1="55.7" y2="96.3" transform="translate(147.6 -42.6)"/><line class="c" x2="111.3" transform="translate(119.8 5.5)"/><path class="c" d="M370.2-42.6H314.5L286.7,5.5l27.8,48.2h55.7L398,5.5Z"/><line class="c" x2="55.7" y2="96.3" transform="translate(314.5 -42.6)"/><line class="c" x1="55.7" y2="96.3" transform="translate(314.5 -42.6)"/><line class="c" x2="111.3" transform="translate(286.7 5.5)"/><path class="c" d="M119.8,5.5H64.2L36.4,53.7l27.8,48.2h55.6l27.8-48.2Z"/><line class="c" x2="55.6" y2="96.4" transform="translate(64.2 5.5)"/><line class="c" x1="55.6" y2="96.4" transform="translate(64.2 5.5)"/><line class="c" x2="111.2" transform="translate(36.4 53.7)"/><path class="c" d="M286.7,5.5H231.1L203.3,53.7l27.8,48.2h55.6l27.8-48.2Z"/><line class="c" x2="55.6" y2="96.4" transform="translate(231.1 5.5)"/><line class="c" x1="55.6" y2="96.4" transform="translate(231.1 5.5)"/><line class="c" x2="111.2" transform="translate(203.3 53.7)"/><path class="c" d="M453.6,5.5H398L370.2,53.7,398,101.9h55.6l27.8-48.2Z"/><line class="c" x2="55.6" y2="96.4" transform="translate(398 5.5)"/><line class="c" x1="55.6" y2="96.4" transform="translate(398 5.5)"/><line class="c" x2="111.2" transform="translate(370.2 53.7)"/><path class="c" d="M119.8,101.9H64.2L36.4,150.1l27.8,48.2h55.6l27.8-48.2Z"/><line class="c" x2="55.6" y2="96.4" transform="translate(64.2 101.9)"/><line class="c" x1="55.6" y2="96.4" transform="translate(64.2 101.9)"/><line class="c" x2="111.2" transform="translate(36.4 150.1)"/><path class="c" d="M203.3,53.7H147.6l-27.8,48.2,27.8,48.2h55.7l27.8-48.2Z"/><line class="c" x2="55.7" y2="96.4" transform="translate(147.6 53.7)"/><line class="c" x1="55.7" y2="96.4" transform="translate(147.6 53.7)"/><line class="c" x2="111.3" transform="translate(119.8 101.9)"/><path class="c" d="M286.7,101.9H231.1l-27.8,48.2,27.8,48.2h55.6l27.8-48.2Z"/><line class="c" x2="55.6" y2="96.4" transform="translate(231.1 101.9)"/><line class="c" x1="55.6" y2="96.4" transform="translate(231.1 101.9)"/><line class="c" x2="111.2" transform="translate(203.3 150.1)"/><path class="c" d="M453.6,101.9H398l-27.8,48.2L398,198.3h55.6l27.8-48.2Z"/><line class="c" x2="55.6" y2="96.4" transform="translate(398 101.9)"/><line class="c" x1="55.6" y2="96.4" transform="translate(398 101.9)"/><line class="c" x2="111.2" transform="translate(370.2 150.1)"/><path class="c" d="M370.2,53.7H314.5l-27.8,48.2,27.8,48.2h55.7L398,101.9Z"/><line class="c" x2="55.7" y2="96.4" transform="translate(314.5 53.7)"/><line class="c" x1="55.7" y2="96.4" transform="translate(314.5 53.7)"/><line class="c" x2="111.3" transform="translate(286.7 101.9)"/><path class="c" d="M203.3,150.1H147.6l-27.8,48.2,27.8,48.1h55.7l27.8-48.1Z"/><line class="c" x2="55.7" y2="96.3" transform="translate(147.6 150.1)"/><line class="c" x1="55.7" y2="96.3" transform="translate(147.6 150.1)"/><line class="c" x2="111.3" transform="translate(119.8 198.3)"/><path class="c" d="M370.2,150.1H314.5l-27.8,48.2,27.8,48.1h55.7L398,198.3Z"/><line class="c" x2="55.7" y2="96.3" transform="translate(314.5 150.1)"/><line class="c" x1="55.7" y2="96.3" transform="translate(314.5 150.1)"/><line class="c" x2="111.3" transform="translate(286.7 198.3)"/></g><path class="a" d="M418.4,145.5Z"/><path class="a" d="M418.4,241.9Z"/></g></svg>');

function setLanguage(language){
	Cookies.set('lang', language);
	location.reload();
}

$(window).load(function () {

	// for css cache
	$('link').each( function() {
		$(this).attr('href', $(this).attr('href')+'?'+Math.random().toString(36).substr(2, 5));
	});

	// for json API
	$.ajaxSetup({
		async: false
	});

	// language selector
	$langSelector = $("#language-selector");

		if(Cookies.get('lang')){
			$langSelector.val(Cookies.get('lang'));
		} else if(navigator.languages.length){
			const fallbackLanguage = 'en';
			var prefLanguage = navigator.languages[0].split('-');
		var languagesList = $langSelector.children('.lang-selection').map(function() { return this.getAttribute('data-language'); }).toArray();
		prefLanguage = languagesList.indexOf(prefLanguage) !== -1 ? prefLanguage : fallbackLanguage;

		$langSelector.val(prefLanguage);
		}

		$langSelector.on('click', '.lang-selection', function(e){
			setLanguage(e.currentTarget.getAttribute('data-language'));
		});

	var time = 100,
		viewport = $(window),

		API_ROOT = "https://api.decred.org",

		// get json
		APIreleases = 'https://api.github.com/repos/decred/decred-release/releases',
		APIstats = API_ROOT + '/?c=gcs',
		APIdc = API_ROOT + '/?c=dc',
		APIstakepools = API_ROOT + '/?c=gsd',
		jsonPercentMined = pow = pos = devs = all = count = null,
		statisticsRelease = $('#statisticsRelease'),
		statisticsDownloads = $('#statisticsDownloads'),
		footerRelease = $('#footerRelease'),
		footerDownloads = $('#footerDownloads'),



		// font weight
		fontRegular = 'fontregular',
		fontSemibold = 'fontsemibold',
		fontBold = 'fontbold',

		// font size
		font14 = 'font14',
		font16 = 'font16',
		font18 = 'font18',
		font22 = 'font22',
		font24 = 'font24',
		font28 = 'font28',
		font38 = 'font38',

		// font color
		colorDarkBlue = 'colordarkblue',

		// line color
		verticalBlue = 'verticalblue',

		// bg color
		backgroundDarkBlue = 'backgrounddarkblue',
		backgroundCyan = 'backgroundcyan',
		backgroundGray = 'backgroundgray',
		backgroundBlue = 'backgroundblue',

		// solid color
		turquoise = 'turquoise';

		// transition
		transition = 'transition',
		transitionModest = 'transitionmodest',
		transitionSlow = 'transitionslow',

		// addins
		guideBlockContentLast = 'guideblockcontentlast',
		cursor = 'cursor',
		hand = 'hand',
		active = 'active',
		counter = 1,

		// first view
		logo = $('.logo'),
		slogan = $('.slogan'),
		playButton = $('.play-button'),
		mobilePlayButton = $('.mobile-play-button'),
		bgIllustration = $('.bg-illustration'),
		bgIllustrationGhost = $('.bg-illustration-ghost'),
		bgGradientGhost = $('.bg-gradient-ghost'),
		firstViewLeft = $('.firstview-left'),
		bgGhost = $('.bg-ghost'),
		videoModal = $('.video-modal'),
		videoModalPlayPauseButton = videoModal.find($('.mejs__playpause-button')),
		videoModalClose = $('.video-modal-close'),
		bgVideo = $('.bg-video'),

		// statistics
		statistics = $('.statistics'),
		bar = $('.statisticsmindebarpercent'),

		networkStatistics = $('.networkstatistics'),
		networkStatisticsSection = $('.networkstatisticssection'),
		networkStatisticsFloat = $('.networkstatisticsfloat'),

		percentNumber = $('.percentnumber'),
		percentMined = $('.percentmined'),

		developmentRowNum = $('.developmentrownum'),

		// guide
		guide = $('.guide'),
		block = $('.block'),
		child = $('.child'),

		top = $('.top'),
		dot = $('.dot'),
		vertical = $('.vertical'),
		small = $('.small'),
		big = $('.big'),
		header = $('.header'),

		content = $('.content'),
		lineLeft = $('.lineleft'),
		media = $('.media'),
		info = $('.info'),
		text = $('.text'),
		buttonContinue = $('.buttoncontinue'),
		buttonBack = $('.buttonback'),

		// footer
		footerBlock = $('.footerblock'),
		icon = $('.icon'),
		footerBlockIndicator = $('.footerblockindicator'),

		// navigation
		navigationButton = $('.navigation-button'),
		navOpenClose = $('.nav-open-close'),
		linkSection = $('.link-section'),

		//mission section
		triangles = $('#triangles'),
		triangle = $('.triangle'),
		chartPercent = $('.mission-chart-mined.percent'),
		chartSupply = $('.mission-chart-supply.amount'),
		featureBubble = $('.featureBubble'),

		// principles section
		principlesSelect = $('.principles-select'),
		principlesSlide = $('.principles-slide'),

		//language menu
		langMenu = $('.lang-menu'),
		langCurrent = $('.lang-current'),
		langSelect = $('.lang-select'),
		langSelection = $('.lang-selection'),

		// team subpage
		teamFilter = $('.team-filter'),
			teamFilterButton = $('.team-filter-button'),
		teamMembers = $('.team-members'),
			teamMember = $('.team-member'),
			teamSlack = teamMember.find($('.slack')),
			teamTwitter = teamMember.find($('.twitter')),
		teamDataBalloon = $(".team-data-balloon"),
			dataBalloonTop = $(".data-balloon-top"),
			dataBalloonBottom = $(".data-balloon-bottom"),
		teamCorporateLogo = $(".team-corporate-logo");


	// team subpage
	teamMember.hide();
	teamFilterButton.click(function () {
		teamFilterButton.not($(this)).removeClass('active');
		$(this).addClass('active');

		var selectedCatergory = $(this).text().toLowerCase(),
			membersToSort = [];

		teamMember.hide();
		teamMembers.each(function(i){
			var filteredMember = $(this).find('[data-filter="' + selectedCatergory + '"]');

			filteredMember.fadeTo(time*2, 1);
		});
	}).eq(0).trigger('click');

	teamCorporateLogo.add(teamSlack).on('mouseenter', function() {

		// get text
		var dataBaloonGetText = '';
		if($(this).is(teamCorporateLogo)) {
			dataBalloonTop.show()
			dataBaloonGetText = $(this).parent().attr('data-corporate-name');
		}
		if($(this).is(teamSlack)) {
			dataBalloonTop.hide();
			dataBaloonGetText = $(this).parent().parent().attr('data-slack');
		}
		dataBalloonBottom.text(dataBaloonGetText);

		// balloon follow
		$(this).mousemove( function(e) {
			teamDataBalloon.css({'left': e.pageX-(teamDataBalloon.width()/2), 'top': e.pageY+20});
		});

		teamDataBalloon.addClass('active');
	}).on('mouseleave', function() {
		teamDataBalloon.removeClass('active');
	});

	teamCorporateLogo.add(teamTwitter).on('mouseenter', function() {

		// get text
		var dataBaloonGetText = '';
		if($(this).is(teamCorporateLogo)) {
			dataBalloonTop.show()
			dataBaloonGetText = $(this).parent().attr('data-corporate-name');
		}
		if($(this).is(teamTwitter)) {
			dataBalloonTop.hide();
			dataBaloonGetText = $(this).parent().parent().attr('data-twitter');
		}
		dataBalloonBottom.text(dataBaloonGetText);

		// balloon follow
		$(this).mousemove( function(e) {
			teamDataBalloon.css({'left': e.pageX-(teamDataBalloon.width()/2), 'top': e.pageY+20});
		});

		teamDataBalloon.addClass('active');
	}).on('mouseleave', function() {
		teamDataBalloon.removeClass('active');
	});

	// language menu
	// when loaded add data-language to langCurrent
	langSelection.each( function() {
		if ($(this).text().toUpperCase() === langCurrent.text().toUpperCase()) {
			langCurrent.attr('data-language', $(this).attr('data-language'));
		}
	});
	langCurrent.add(langSelect).add(langSelection).on('change click', function () {
		langMenu.toggleClass('active');

		langSelection.each( function() {
			if ($(this).text().toUpperCase() === langCurrent.text().toUpperCase()) {
				$(this).hide();
			} else {
				$(this).css('display', 'block');
			}
		});

		if ($(this).is(langSelect)) {
			langMenu.removeClass('active');
		}
		if ($(this).is(langSelection)) {
			langCurrent.text($(this).text()).attr('data-language', $(this).attr('data-language'));
		}
	});

	// first view
	videoModalPlayPauseButton.parent().prepend('<a href="#" class="video-modal-close">Close</a>');

	playButton.on('mouseenter', function() {
		bgIllustrationGhost.removeClass('active');
		bgGradientGhost.add(firstViewLeft).add(bgVideo).addClass('active');
	}).on('mouseleave', function() {
		bgIllustrationGhost.addClass('active');
		bgGradientGhost.add(firstViewLeft).add(bgVideo).removeClass('active');
	});
	playButton.add(mobilePlayButton).add($('.video-modal-close')).click( function() {
		if($(this).is(playButton) || $(this).is(mobilePlayButton)) {
			videoModal.addClass('active');

			// play media element
			videoModalPlayPauseButton.children().eq(0).click();
			return false;
		}
		if($(this).is($('.video-modal-close'))) {
			videoModal.removeClass('active');

			// play media element
			videoModalPlayPauseButton.children().eq(0).click();
			jQuery.each(mejs.players, function(key, val) {
				val.pause();
			});
			return false;
		}
	});

	// principles section
	principlesSelect.eq(0).addClass('active');
	principlesSlide.eq(0).addClass('active');
	principlesSelect.click( function() {
		principlesSelect.add(principlesSlide).removeClass('active');
		principlesSlide.eq($(this).index()).addClass('active');
		$(this).toggleClass('active');
	});


	// get data from external json and output correct values
	$.getJSON(APIstats, function(json) {
		var supply_total = Math.floor((json.CoinSupplyMinedRaw / 100000000)),
			mined = supply_total - 1680000;

		jsonPercentMined = ((supply_total / 21000000) * 100).toFixed(1);

		premine = 1680000;
		pow = mined * 0.6;
		pos = mined * 0.3;
		devs = mined * 0.1;
		all = premine + pow + pos + devs;
	});
	// get download_count from github
	$.getJSON(APIdc, function(data) {
		count = data[1];
	});

	statisticsDownloads.add(footerDownloads).text(count);
	// add calculated percent to UI bar
	percentNumber.text(jsonPercentMined + '% ');



	//mission section
	var trianglesHide = triangle.length - (Math.floor(triangle.length / 100 * jsonPercentMined) + 1),
		triangles = [];
	for (var i = 1; i <= triangle.length; i++) {
		triangles.push(i);
	}

	triangles.sort( function() {
		return .5 - Math.random();
	}).slice(0, trianglesHide).forEach( function(e) {
		triangle.eq(e).hide();
	}, this);

	function numberWithSpaces(x) {
		return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
	}
	chartSupply.text(numberWithSpaces(Math.floor(all) + 1));
	chartPercent.text(jsonPercentMined + '%');


	// guide, child, content min and max height
	block.add(child).each( function() {
		var element = $(this);

		if (element.is(block)) {
			element.attr('data-min-height', element.children().first().children().first().height()); //.attr('data-max-height', element.height());
		}
		if (element.is(child)) {
			element.attr('data-min-height', element.children().first().height()); //.attr('data-max-height', element.height());
		}
	});
	// hide last content vertical line
	lineLeft.last().addClass('opacity000');
	// vertical, first and last add dark blue
	vertical.eq(0).addClass(backgroundDarkBlue);
	vertical.last().addClass(backgroundDarkBlue);
	// add new text to last continue button
	buttonContinue.last().text($('#label-tour-start-button').attr('value'));
	// remove first back button
	buttonBack.eq(0).remove();
	// guide navigation
	header.on('click', function() {
		var header_ = $(this),
			child_ = header_.parent().parent(),
			block_ = child_.parent(),
			h_ = 0;

		// do nothing if this section is already open
		if( child_.hasClass(active) ) {
			return;
		}

		// reset counter for continue or back button
		counter = header.index(this);

		// add active class to visible elements
		block.add(child).add(header).removeClass(active);
		block_.add(child_).add(header_).addClass(active);

		// current header and dot to cyan
		header.removeClass(backgroundCyan).removeClass(colorDarkBlue).removeClass(cursor);
		dot.children().removeClass(backgroundCyan);
		header_.addClass(backgroundCyan).addClass(colorDarkBlue).addClass(cursor);
		header_.prev().children().addClass(backgroundCyan);

		// vertical, next and current
		header.eq(counter + 1).prev().children().eq(0).addClass(backgroundCyan);
		header_.prev().children().eq(0).removeClass(backgroundCyan);

		// block height what has visible content
		block_.children().not(child_).each(function () {
			h_ += parseInt($(this).attr('data-min-height'));
		});

		//                   parseInt(child_[0].scrollHeight)+h_
		block_.css('height', child_[0].scrollHeight + h_);
		block.not(block_).css('height', block_.attr('data-min-height'));

		//                   child_.attr('data-max-height')
		child_.css('height', child_[0].scrollHeight);
		child.not(child_).each(function () {
			$(this).css('height', $(this).attr('data-min-height'));
		});

	}).eq(0).trigger('click');
	// guide continue and back button
	buttonContinue.add(buttonBack).click(function () {
		var element = $(this);

		if (element.is(buttonContinue)) {
			counter = (counter + 1 < header.length ? counter + 1 : 0);
			header.eq(counter).trigger('click');
		}
		if (element.is(buttonBack)) {
			counter = (counter - 1 < header.length ? counter - 1 : 0);
			header.eq(counter).trigger('click');
		}
	});
	// guide header
	header.mouseenter( function() {
		if (!$(this).hasClass(backgroundCyan)) {
			$(this).prev().children().eq(1).addClass(backgroundCyan);
		}
	}).mouseleave( function() {
		if (!$(this).hasClass(backgroundCyan)) {
			$(this).prev().children().eq(1).removeClass(backgroundCyan);
		}
	});

	// show label when hovering icon
	icon.mouseenter( function() {
		footerBlockIndicator.text($(this).attr('data-label')).removeClass('opacity000');
	}).mouseleave( function() {
		footerBlockIndicator.addClass('opacity000');
	});

	// show slogan when hovering frontpage logo
	logo.mouseenter( function() {
		slogan.addClass('opacity075');
	}).mouseleave( function() {
		slogan.removeClass('opacity075');
	});

	// upon scroll show mined %
	viewport.scroll( function() {
		if (verge.inViewport(percentMined, -200)) {
			bar.css('width', jsonPercentMined + '%');
		}
	});


	// subpage header
	viewport.trigger('resize');


	// upon resize
	viewport.resize(_.debounce( function() {
		var activeElement = $('.active'),
			activeBlock = activeElement.not(child.add(header)),
			activeChild = activeElement.not(block.add(header)),
			childrenHeight = 0,
			activeChildHeight = activeChild.children().last().outerHeight(true) + parseFloat(activeChild.attr('data-min-height'));

		// calculate block children height
		activeBlock.children().not(activeChild).each(function () {
			childrenHeight += parseFloat($(this).attr('data-min-height'));
		});

		// re-height guide section
		activeElement.not(child.add(block)).trigger('click');
		activeChild.css('height', activeChildHeight);
		activeBlock.css('height', activeChildHeight + childrenHeight);

		// re-float element networkstatisticsfloat
		$('.networkstatisticssection').eq(0).trigger('click');
	}, time * 3));


	// stakepools
	var stakepoolFinder = function() {
			var fields = ["PoolFees", "Voted", "Missed", "Live", "Immature", "UserCount"];

			tableMarkup = '<table id="pooldata" class="datatables">' +
				'<thead>' +
				'<tr class="">' +
				'<th class="poodIdHeader" style="padding-left: 2px; background-image: none;">ID</th>' +
				'<th class="addressHeader" style="padding-left: 10px; background-image: none;">Address</th>' +
				'<th class="networkHeader" style="padding-left: 2px; background-image: none;">Network</th>' +
				'<th class="lastUpdatedHeader" style="padding-left: 10px; width: 80px; text-align: left;">Last Updated</th>' +
				'<th>Proportion</th>';
			$.each(fields, function (i, field) {
				tableMarkup += '<th>' + field + '</th>';
			});

			tableMarkup += '</tr></thead><tbody>';

			$("#stakepool-data").html("Loading...");

			$.ajax({
				url: APIstakepools,
				dataType: "json",
				error: function (jqXHR, textStatus, errorThrown) {
					errorMarkup = '<div class="ui-widget"><div class="ui-state-error ui-corner-all">' +
						'<p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>' +
						'<strong>Error:</strong> ' + textStatus + ": " + errorThrown + '</p></div></div>';
				},
				success: function (data, textStatus) {
					$.each(data, function (poolName, poolData) {
						var overCapacity = 0;
						var now = Math.floor((new Date).getTime() / 1000);
						var lastUpdated = poolData["LastUpdated"] - now;
						var lastUpdateFormatted = moment.duration(lastUpdated, "seconds").humanize(true);
						if (lastUpdateFormatted.indexOf("years") > 0) {
							lastUpdateFormatted = "N/A";
						}
						var proplive = poolData["ProportionLive"];
						if (isNaN(proplive)) {
							proplive = 0;
						}
						var proportion = proplive * 100;
						proportion = Math.round(proportion * 100) / 100;
						if (proportion.toString().length == "3") {
							proportion = proportion + "0";
						}
						if (proportion > 5 && poolData["Network"] == "mainnet") {
							overCapacity = 1;
						}
						proportion = proportion + "%";
						tableMarkup += '<tr class="rowHover transition ' + poolData["Network"] + (overCapacity ? ' overcapacity"' : '"') + '>';
						tableMarkup += '<td class="poolId">' + poolName + '</td>';
						tableMarkup += '<td class="address"><a target="_blank" href="' + poolData["URL"] + '">' + poolData["URL"] + '</a></td>';
						tableMarkup += '<td class="network">' + poolData["Network"] + '</td>';
						tableMarkup += '<td class="lastUpdate inconsolata">' + lastUpdateFormatted + '</td>';
						tableMarkup += '<td class="inconsolata">' + (overCapacity ? ' <span class="inconsolata overcapacityWarning" style="" title="See warning below">' + proportion + '</span>' : proportion) + '</td>';

						$.each(fields, function (i, field) {
							if (poolData.hasOwnProperty(field)) {
								var value = poolData[field]
								if (field == "PoolFees") {
									poolFees = "" + poolData[field];
									if (poolFees != "N/A" && poolFees.substr(-1) != "%") {
										poolFees += "%";
									}
									value = poolFees
								}
								tableMarkup += '<td class="inconsolata">' + value + '</td>';
							} else {
								tableMarkup += '<td class="inconsolata">N/A</td>';
							}
						});

						tableMarkup += '</tr>';
					});
					tableMarkup += '</tbody></table>';
					$("#stakepool-data").html(tableMarkup);
					$("#pooldata").ready(function (event) {
						$(".overcapacity").appendTo("#pooldata");
						$(".testnet").appendTo("#pooldata");
					})

					$("#pooldata").DataTable({
						"order": [],
						/* no default sort */
						"jQueryUI": false,
						"paging": false,
						"searching": false,
						"info": false,
						'lengthChange': false
					});
				},
			});
		};
		if (window.location.href.indexOf('stakepools') != -1) {
		stakepoolFinder();
		};

	// upon window load
	// first view
	bgIllustration.css('width', (viewport.width() / 2) - 80);
	bgGhost.css('width', (viewport.width() / 2) + 80);
	// upon resize
	viewport.resize(function () {

		// first view
			bgIllustration.css('width', ($(this).width() / 2) - 80);
			bgGhost.css('width', ($(this).width() / 2) + 80);
	});

	// navigation menu
	navigationButton.click( function() {
		navOpenClose.add(linkSection).toggleClass('active');
	});

	if (platform.os.family == "Windows" || platform.os.family == "Windows Server" || platform.os.family == "Windows 7" || platform.os.family == "Windows 7 / Server 2008 R2" || platform.os.family == "Windows Server 2008 R2 / 7 x64") {
		if (platform.os.architecture == "32") {
			$(".win32dl").show();
			$(".alldl").hide();
		} else if (platform.os.architecture == "64") {
			$(".win64dl").show();
			$(".alldl").hide();
		} else {
			// shouldn't get here
			$(".windl").show();
			$(".alldl").hide();
		}
	}

	if (platform.os.family == "CentOS" || platform.os.family == "Debian" || platform.os.family == "Fedora" || platform.os.family == "Gentoo" || platform.os.family == "Kubuntu" || platform.os.family == "Linux Mint" || platform.os.family == "Red Hat" || platform.os.family == "SuSE" || platform.os.family == "Ubuntu" || platform.os.family == "Ubuntu Chromium" || platform.os.family == "Xubuntu" || platform.os.family == "Linux") {
		$(".linuxdl").show();
		$(".alldl").hide();
	}

	if (platform.os.family == "OS X") {
		$(".macdl").show();
		$(".alldl").hide();
	}

	$('#mediaplayer').mediaelementplayer({
		pluginPath: "/path/to/shims/",
	// When using jQuery's `mediaelementplayer`, an `instance` argument
	// is available in the `success` callback
		success: function(mediaElement, originalNode, instance) {
			// do things
		}
	});





});


var pathEls = document.querySelectorAll('path');
for (var i = 0; i < pathEls.length; i++) {
  var pathEl = pathEls[i];
  var offset = anime.setDashoffset(pathEl);
  pathEl.setAttribute('stroke-dashoffset', offset);
  anime({
    targets: pathEl,
    strokeDashoffset: [offset, 0],
    duration: anime.random(1000, 3000),
    delay: anime.random(0, 2000),
    loop: true,
    direction: 'alternate',
    easing: 'easeInOutSine',
    autoplay: true
  });
}
